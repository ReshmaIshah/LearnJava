"use strict";function HostPage(t,s){this._safeOrigins=s||[],this._hostWindow=t,this._appWindow=null}HostPage.prototype={constructor:HostPage,init:function(){this._hostWindow.addEventListener("message",this._messageHandler.bind(this),!1),this._hostWindow.addEventListener("popstate",this._popstateHandler.bind(this),!1)},_isOriginSafe:function(t){return this._safeOrigins.indexOf(t)>=0},_postMessage:function(t){if(this._appWindow=this._appWindow||this._hostWindow.document.querySelector("#service_iframe").contentWindow,this._appWindow)for(var s=0;s<this._safeOrigins.length;s++)this._appWindow.postMessage(t,this._safeOrigins[s])},_messageHandler:function(t){var s=t.origin||t.originalEvent.origin;if(this._isOriginSafe(s)&&t.data&&t.data.name&&t.data.params)switch(t.data.name){case"push-history-state":this._hostWindow.history.pushState(t.data.params.state,t.data.params.title,t.data.params.url);break;case"replace-history-state":this._hostWindow.history.replaceState(t.data.params.state,t.data.params.title,t.data.params.url);break;case"set-title":this._hostWindow.document.title=t.data.params.title;break;case"reload-app":this._hostWindow.location.reload();break;case"refresh-user-session":this._refreshUserSession()}},_popstateHandler:function(t){this._postMessage({name:"history-state-changed",params:{state:t.state}})},_refreshUserSession:function(){var t=new XMLHttpRequest;t.open("POST","/index.php?rm=box_notes_keep_alive"),t.setRequestHeader("X-Request-Token",Box.config.requestToken),t.send()}},function(){var t=new HostPage(window,window.safeOrigins);t.init()}();
//# sourceMappingURL=/webapp_assets/js/notes-fb7f1a878a.js.map